#!/usr/bin/env ruby
require 'yaml'
require 'pgn'
require 'net/http'
require 'json'

require 'meta_repertoire'
include MetaRepertoire

repertoire_config = YAML.load(File.read(ARGV[0]))
repertoire = Repertoire.new(
  repertoire_config['color'],
  repertoire_config['lines'],
  repertoire_config['games'],
  LichessDB.new('lichess.sqlite3')
)

repertoire.compute_lines

print repertoire.pretty_print
